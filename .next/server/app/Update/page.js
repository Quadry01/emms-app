(()=>{var e={};e.id=522,e.ids=[522],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},1774:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=r(260),a=r(8203),n=r(5155),o=r.n(n),l=r(7292),i={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(t,i);let d=["",{children:["Update",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5696)),"/Users/apple2/Desktop/    /app/Update/page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2909)),"/Users/apple2/Desktop/    /app/layout.jsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/apple2/Desktop/    /app/Update/page.jsx"],p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/Update/page",pathname:"/Update",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4741:(e,t,r)=>{Promise.resolve().then(r.bind(r,5696))},8309:(e,t,r)=>{Promise.resolve().then(r.bind(r,8039))},2726:()=>{},6286:()=>{},7224:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3219,23)),Promise.resolve().then(r.t.bind(r,4863,23)),Promise.resolve().then(r.t.bind(r,5155,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,6313,23)),Promise.resolve().then(r.t.bind(r,8530,23)),Promise.resolve().then(r.t.bind(r,8921,23))},7896:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6959,23)),Promise.resolve().then(r.t.bind(r,3875,23)),Promise.resolve().then(r.t.bind(r,8903,23)),Promise.resolve().then(r.t.bind(r,4178,23)),Promise.resolve().then(r.t.bind(r,6013,23)),Promise.resolve().then(r.t.bind(r,7190,23)),Promise.resolve().then(r.t.bind(r,1365,23))},7790:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(5512),a=r(8009),n=r(6112),o=r(6008),l=r(8578);r(6930),r(7424);let i=()=>l.oR.success("Logout Successfully  ",{position:"top-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),d=async e=>{sessionStorage.clear(),e.preventDefault();try{await (0,n.ri)(),i()}catch(e){console.error("Error code:",e.code),console.error("Error message:",e.message)}},c=function(){let[e,t]=(0,a.useState)(!1);return e?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:" absolute top-4 right-5 h-72",children:[(0,s.jsx)(o.default,{target:"#",href:"/Dashboard",className:" relative mx-1 text-white py-2text-white bg-sky-900 font-medium rounded-lg text-sm px-5 py-2.5 text-center ",children:"Home"}),(0,s.jsx)("button",{onClick:d,className:" relative mx-1 text-white py-2text-white bg-sky-900 font-medium rounded-lg text-sm px-5 py-2.5 text-center ",children:"Logout"}),(0,s.jsx)(o.default,{target:"#",href:"/Mails",className:" relative mx-1 text-white py-2text-white bg-sky-900 font-medium rounded-lg text-sm px-5 py-2.5 text-center ",children:"Database"}),(0,s.jsx)(o.default,{target:"#",href:"/Query",className:" relative  mx-1 text-white py-2text-white bg-sky-900 font-medium rounded-lg text-sm px-5 py-2.5 text-center ",children:"Track mail"}),(0,s.jsx)(o.default,{target:"#",href:"/BQuery",className:" relative mx-1 text-white py-2text-white bg-sky-900 font-medium rounded-lg text-sm px-5 py-2.5 text-center ",children:"Search"}),(0,s.jsx)(o.default,{target:"#",href:"/Update",className:" relative mx-1 text-white py-2text-white bg-sky-900 font-medium rounded-lg text-sm px-5 py-2.5 text-center ",children:"Update"}),(0,s.jsx)(o.default,{target:"#",href:"/Delete",className:" relative mx-1 text-white py-2text-white bg-sky-900 font-medium rounded-lg text-sm px-5 py-2.5 text-center ",children:"Delete"})]}),(0,s.jsx)(l.N9,{})]}):null}},8039:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(5512),a=r(8009),n=r(9060);let o=()=>{let[e,t]=(0,a.useState)("");return(0,a.useEffect)(()=>{},[]),e},l=async(e,t)=>{if(!e)return console.error("Office ID is missing"),null;try{let{data:r,error:s}=await n.N.from(e).select("*").eq("mail_id",t);if(s)return console.error("Error fetching mail by ID:",s),null;return r}catch(e){return console.error("Unexpected error:",e),null}},i=e=>{let t=o(),[r,s]=(0,a.useState)(null),[n,i]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{e&&t&&(async()=>{i(!0),s(await l(t,e)),i(!1)})()},[e,t]),{mailData:r,loading:n,updateMailById:r=>updateMailById(t,e,r)}};var d=r(7790),c=r(8578);r(5806);let p=e=>c.oR.success(e,{position:"top-left",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),u=()=>{let[e,t]=(0,a.useState)("");return(0,a.useEffect)(()=>{},[]),e},m=async(e,t,r)=>{if(!e||!t||!Object.keys(r).length)return console.error("Error: Missing parameters."),null;try{let{data:s,error:a}=await n.N.from(e).select("*").eq("mail_id",t).single();if(a)return console.error("Error fetching existing data:",a.message),null;let{data:o,error:l}=await n.N.from(e).update(r).eq("mail_id",t).select().single();if(l)return console.error("Error updating record:",l.message),null;return console.log("Updated data:",o),o}catch(e){return console.error("Unexpected error:",e),null}},x=()=>{let e=u(),[t,r]=(0,a.useState)(""),[n,o]=(0,a.useState)({}),{mailData:l,loading:x}=i(t),[h,g]=(0,a.useState)(!1),f=async()=>{if(t&&Object.keys(n).length){g(!0);try{await m(e,t,n)&&p("Updated Successfully")}catch(e){console.error("Error during update operation:",e)}finally{g(!1)}}};return(0,s.jsxs)("div",{children:[(0,s.jsx)(c.N9,{}),(0,s.jsxs)("form",{className:"max-w-lg mx-auto mt-80",children:[(0,s.jsx)("h2",{className:"mb-2 text-3xl text-center font-bold text-sky-900",children:"Search by Mail ID to Update Mail"}),(0,s.jsx)("input",{type:"search",className:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Mail ID",value:t,onChange:e=>r(e.target.value),required:!0})]}),x&&t&&(0,s.jsx)("p",{children:"Loading..."}),!x&&t&&(!l||0===l.length)&&(0,s.jsx)("p",{children:"No mail found."}),!x&&l&&l.length>0&&(0,s.jsxs)("div",{className:"py-8 px-4 mx-auto max-w-2xl lg:py-16",children:[(0,s.jsx)("p",{className:"mb-4 text-xl font-bold text-sky-900",children:"Only Current Location can be edited"}),(0,s.jsx)("form",{children:(0,s.jsx)("div",{className:"flex sm:flex-col gap-6",children:Object.entries(l[0]).map(([e,t])=>(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-900",children:e.replace(/_/g," ")}),(0,s.jsx)("input",{type:"text",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5",name:e,value:n[e]||t,onChange:t=>o(r=>({...r,[e]:t.target.value})),readOnly:["id","created_at","mail_id","sender","title","endorse_by"].includes(e)})]},e))})}),(0,s.jsx)("button",{className:"inline-flex items-center px-5 py-2.5 mt-4 text-sm font-medium text-white bg-sky-900 rounded-lg focus:ring-4 focus:ring-primary-200 hover:bg-primary-800",onClick:f,disabled:h,children:h?"Updating...":"Update Mail"})]}),(0,s.jsx)(d.A,{})]})}},6112:(e,t,r)=>{"use strict";r.d(t,{$5:()=>n,iD:()=>o,ri:()=>l});var s=r(6930),a=r(7424);let n=async(e,t)=>{try{await (0,s.eJ)(a.j,e,t)}catch(e){throw console.error(e.message),e}},o=async(e,t)=>{try{await (0,s.x9)(a.j,e,t)}catch(e){throw console.error(e.message),e}},l=async()=>{try{await (0,s.CI)(a.j)}catch(e){throw console.error(e.message),e}}},7424:(e,t,r)=>{"use strict";r.d(t,{j:()=>l});var s=r(6722),a=r(6930);let n={apiKey:"AIzaSyDw2861uQIf23W-6vdOyrHvIANzfVCisgY",authDomain:"emms-608f3.firebaseapp.com",projectId:process.env.FIREBASE_PROJECT_ID,storageBucket:process.env.FIREBASE_STORAGE_BUCKET,messagingSenderId:process.env.FIREBASE_MESSAGING_SENDER_ID,appId:process.env.FIREBASE_APP_ID,measurementId:process.env.FIREBASE_MEASUREMENT_ID},o=(0,s.Wp)(n),l=(0,a.xI)(o)},9060:(e,t,r)=>{"use strict";r.d(t,{N:()=>s});let s=(0,r(6626).UU)("https://njfjrmzykoyqgobwkudm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5qZmpybXp5a295cWdvYndrdWRtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzYxMjI0NzgsImV4cCI6MjA1MTY5ODQ3OH0.OT5l8HPprDT_TWngcwqoZ4EjLimu1cQ-mgKA8DlRKXg")},5696:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/apple2/Desktop/    /app/Update/page.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/apple2/Desktop/    /app/Update/page.jsx","default")},2909:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>a});var s=r(2740);r(2704);let a={title:"EMMS",description:"Electronic Mail Management System"};function n({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:" antialiased",children:e})})}},2704:()=>{},5806:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[112,205,626],()=>r(1774));module.exports=s})();