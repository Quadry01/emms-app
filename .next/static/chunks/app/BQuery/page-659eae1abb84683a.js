(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[409],{8494:(e,t,s)=>{Promise.resolve().then(s.bind(s,1806))},1806:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(5155),a=s(2115),l=s(2418);let n=e=>{let[t,s]=(0,a.useState)(null),[r,n]=(0,a.useState)(!0),[c,d]=(0,a.useState)(null);return(0,a.useEffect)(()=>{d(sessionStorage.getItem("officeID"))},[]),(0,a.useEffect)(()=>{(async()=>{if(n(!0),e&&c){let t=function(e){return"string"!=typeof e?"":e.replace(/"/g,"")}(c);try{let{data:r,error:a}=await l.N.from(t).select("*").ilike("sender","%".concat(e,"%"));a?(console.error("Error fetching mails by sender:",a),s(null)):s(r)}catch(e){console.error("Unexpected error:",e),s(null)}}else s(null);n(!1)})()},[e,c]),{mailData:t,loading:r}};var c=s(7374),d=s(7396),i=s(399),o=s(3456),m=s(2110);let x=e=>{let{handleLogout:t}=e;return(0,r.jsxs)("div",{className:"absolute top-4 right-4 h-72",children:[(0,r.jsx)(d.default,{target:"#",href:"/Dashboard",className:" relative mx-1 text-white py-2 text-white bg-sky-900 font-medium rounded-lg text-sm px-5 py-2.5 text-center ",children:"Home"}),(0,r.jsx)("button",{onClick:t,className:"relative mx-1 text-white bg-sky-900 font-medium rounded-lg text-sm px-5 py-2.5 text-center",children:"Logout"}),(0,r.jsx)(d.default,{target:"#",href:"/Mails",className:"relative mx-1 text-white bg-sky-900 font-medium rounded-lg text-sm px-5 py-2.5 text-center",children:"Database"}),(0,r.jsx)(d.default,{target:"#",href:"/Query",className:"relative mx-1 text-white bg-sky-900 font-medium rounded-lg text-sm px-5 py-2.5 text-center",children:"Track Mail"}),(0,r.jsx)(d.default,{target:"#",href:"/BQuery",className:"relative mx-1 text-white bg-sky-900 font-medium rounded-lg text-sm px-5 py-2.5 text-center",children:"Search"}),(0,r.jsx)(d.default,{target:"#",href:"/Update",className:"relative mx-1 text-white bg-sky-900 font-medium rounded-lg text-sm px-5 py-2.5 text-center",children:"Update"}),(0,r.jsx)(d.default,{target:"#",href:"/Delete",className:" relative mx-1 text-white py-2text-white bg-sky-900 font-medium rounded-lg text-sm px-5 py-2.5 text-center ",children:"Delete"})]})},u=()=>{let[e,t]=(0,a.useState)(""),{mailData:s,loading:l}=n(e),[d,u]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{u(!0);let e=(0,i.hg)(o.j,e=>{e?console.log("No user is signed in"):(window.location.href="/",console.log("User is signed in:",e))});return()=>e()},[]),!d)return null;let h=async e=>{e.preventDefault();try{await (0,c.ri)(),notify1()}catch(e){console.error("Error code:",e.code),console.error("Error message:",e.message)}},g=e=>t(e.target.value);return s&&Array.isArray(s)?(0,r.jsxs)("div",{children:[(0,r.jsxs)("form",{className:"max-w-lg mx-auto mt-44",children:[(0,r.jsx)("h2",{className:"mb-4 text-3xl text-center font-bold text-sky-900",children:"Enter Sender Name"}),(0,r.jsx)("div",{className:"relative w-full",children:(0,r.jsx)("input",{type:"search",className:"block p-2.5 w-full z-20 text-sm text-sky-900 bg-gray-50 rounded-lg border-2 border-gray-300 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search by sender...",value:e,onChange:g,required:!0})})]}),l&&e&&(0,r.jsx)("p",{children:"Loading..."}),(0,r.jsx)("div",{className:"w-full max-w-7xl px-4 md:px-5 lg:px-5 mx-auto mt-8",children:s.length>0?(0,r.jsxs)("table",{className:"min-w-full bg-white shadow-lg rounded-lg",children:[(0,r.jsxs)("thead",{className:"bg-sky-900 text-white",children:[console.log(s),(0,r.jsx)("tr",{children:["S/N","Sender","Title","Description","Created At","Remarks","Image","Maail ID"].map(e=>(0,r.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold",children:e},e))})]}),(0,r.jsx)("tbody",{children:s.map(e=>(0,r.jsxs)("tr",{className:"border-b hover:bg-gray-100",children:[(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:e.id}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:e.sender}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:e.title}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:e.description}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:e.created_at}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:e.remarks}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:(0,r.jsx)("a",{href:e.image_url,target:"_blank",rel:"noopener noreferrer",className:"text-sky-900 hover:underline",children:"View Image"})}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:e.mail_id})]},e.id))})]}):(0,r.jsxs)("p",{children:['No mails found for the sender "',e,'"']})}),(0,r.jsx)(x,{handleLogout:h}),(0,r.jsx)(m.N9,{})]}):(0,r.jsxs)("form",{className:"max-w-lg mx-auto mt-44",children:[(0,r.jsx)("h2",{className:"mb-4 text-3xl text-center font-bold text-sky-900",children:"Enter Sender Name"}),(0,r.jsx)("div",{className:"relative w-full",children:(0,r.jsx)("input",{type:"search",className:"block p-2.5 w-full z-20 text-sm text-sky-900 bg-gray-50 rounded-lg border-2 border-gray-300 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search by sender...",value:e,onChange:g,required:!0})}),(0,r.jsx)(x,{handleLogout:h})]})}},7374:(e,t,s)=>{"use strict";s.d(t,{$5:()=>l,iD:()=>n,ri:()=>c});var r=s(399),a=s(3456);let l=async(e,t)=>{try{await (0,r.eJ)(a.j,e,t)}catch(e){throw console.error(e.message),e}},n=async(e,t)=>{try{await (0,r.x9)(a.j,e,t)}catch(e){throw console.error(e.message),e}},c=async()=>{try{await (0,r.CI)(a.j)}catch(e){throw console.error(e.message),e}}},3456:(e,t,s)=>{"use strict";s.d(t,{j:()=>d});var r=s(9904),a=s(399),l=s(2818);let n={apiKey:"AIzaSyDw2861uQIf23W-6vdOyrHvIANzfVCisgY",authDomain:"emms-608f3.firebaseapp.com",projectId:l.env.FIREBASE_PROJECT_ID,storageBucket:l.env.FIREBASE_STORAGE_BUCKET,messagingSenderId:l.env.FIREBASE_MESSAGING_SENDER_ID,appId:l.env.FIREBASE_APP_ID,measurementId:l.env.FIREBASE_MEASUREMENT_ID},c=(0,r.Wp)(n),d=(0,a.xI)(c)},2418:(e,t,s)=>{"use strict";s.d(t,{N:()=>r});let r=(0,s(3524).UU)("https://njfjrmzykoyqgobwkudm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5qZmpybXp5a295cWdvYndrdWRtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzYxMjI0NzgsImV4cCI6MjA1MTY5ODQ3OH0.OT5l8HPprDT_TWngcwqoZ4EjLimu1cQ-mgKA8DlRKXg")}},e=>{var t=t=>e(e.s=t);e.O(0,[138,524,564,441,517,358],()=>t(8494)),_N_E=e.O()}]);