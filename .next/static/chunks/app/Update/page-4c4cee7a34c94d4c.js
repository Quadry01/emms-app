(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[522],{6515:(e,t,r)=>{Promise.resolve().then(r.bind(r,453))},9430:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var s=r(5155),a=r(2115),l=r(7374),i=r(7396),n=r(2110),o=r(399),c=r(3456);let d=()=>n.oR.success("Logout Successfully  ",{position:"top-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),u=async e=>{sessionStorage.clear(),e.preventDefault();try{await (0,l.ri)(),d()}catch(e){console.error("Error code:",e.code),console.error("Error message:",e.message)}},m=function(){let[e,t]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{t(!0);let e=(0,o.hg)(c.j,e=>{e||(window.location.href="/")});return()=>e()},[]),e)?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:" absolute top-4 right-5 h-72",children:[(0,s.jsx)(i.default,{target:"#",href:"/Dashboard",className:" relative mx-1 text-white py-2text-white bg-sky-900 font-medium rounded-lg text-sm px-5 py-2.5 text-center ",children:"Home"}),(0,s.jsx)("button",{onClick:u,className:" relative mx-1 text-white py-2text-white bg-sky-900 font-medium rounded-lg text-sm px-5 py-2.5 text-center ",children:"Logout"}),(0,s.jsx)(i.default,{target:"#",href:"/Mails",className:" relative mx-1 text-white py-2text-white bg-sky-900 font-medium rounded-lg text-sm px-5 py-2.5 text-center ",children:"Database"}),(0,s.jsx)(i.default,{target:"#",href:"/Query",className:" relative  mx-1 text-white py-2text-white bg-sky-900 font-medium rounded-lg text-sm px-5 py-2.5 text-center ",children:"Track mail"}),(0,s.jsx)(i.default,{target:"#",href:"/BQuery",className:" relative mx-1 text-white py-2text-white bg-sky-900 font-medium rounded-lg text-sm px-5 py-2.5 text-center ",children:"Search"}),(0,s.jsx)(i.default,{target:"#",href:"/Update",className:" relative mx-1 text-white py-2text-white bg-sky-900 font-medium rounded-lg text-sm px-5 py-2.5 text-center ",children:"Update"}),(0,s.jsx)(i.default,{target:"#",href:"/Delete",className:" relative mx-1 text-white py-2text-white bg-sky-900 font-medium rounded-lg text-sm px-5 py-2.5 text-center ",children:"Delete"})]}),(0,s.jsx)(n.N9,{})]}):null}},453:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(5155),a=r(2115),l=r(2418);let i=e=>"string"==typeof e?e.replace(/"/g,""):"",n=()=>{let[e,t]=(0,a.useState)("");return(0,a.useEffect)(()=>{{let e=sessionStorage.getItem("officeID");console.log("Stored Office ID:",e),t(i(e))}},[]),e},o=async(e,t)=>{if(!e)return console.error("Office ID is missing"),null;try{let{data:r,error:s}=await l.N.from(e).select("*").eq("mail_id",t);if(s)return console.error("Error fetching mail by ID:",s),null;return r}catch(e){return console.error("Unexpected error:",e),null}},c=e=>{let t=n(),[r,s]=(0,a.useState)(null),[l,i]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{e&&t&&(async()=>{i(!0),s(await o(t,e)),i(!1)})()},[e,t]),{mailData:r,loading:l,updateMailById:r=>updateMailById(t,e,r)}};var d=r(9430),u=r(2110);r(5716);let m=e=>u.oR.success(e,{position:"top-left",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),x=()=>{let[e,t]=(0,a.useState)("");return(0,a.useEffect)(()=>{{let e=sessionStorage.getItem("officeID");t(null==e?void 0:e.replace(/"/g,""))}},[]),e},g=async(e,t,r)=>{if(!e||!t||!Object.keys(r).length)return console.error("Error: Missing parameters."),null;try{let{data:s,error:a}=await l.N.from(e).select("*").eq("mail_id",t).single();if(a)return console.error("Error fetching existing data:",a.message),null;let{data:i,error:n}=await l.N.from(e).update(r).eq("mail_id",t).select().single();if(n)return console.error("Error updating record:",n.message),null;return console.log("Updated data:",i),i}catch(e){return console.error("Unexpected error:",e),null}},p=()=>{let e=x(),[t,r]=(0,a.useState)(""),[l,i]=(0,a.useState)({}),{mailData:n,loading:o}=c(t),[p,h]=(0,a.useState)(!1),f=async()=>{if(t&&Object.keys(l).length){h(!0);try{await g(e,t,l)&&m("Updated Successfully")}catch(e){console.error("Error during update operation:",e)}finally{h(!1)}}};return(0,s.jsxs)("div",{children:[(0,s.jsx)(u.N9,{}),(0,s.jsxs)("form",{className:"max-w-lg mx-auto mt-80",children:[(0,s.jsx)("h2",{className:"mb-2 text-3xl text-center font-bold text-sky-900",children:"Search by Mail ID to Update Mail"}),(0,s.jsx)("input",{type:"search",className:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Mail ID",value:t,onChange:e=>r(e.target.value),required:!0})]}),o&&t&&(0,s.jsx)("p",{children:"Loading..."}),!o&&t&&(!n||0===n.length)&&(0,s.jsx)("p",{children:"No mail found."}),!o&&n&&n.length>0&&(0,s.jsxs)("div",{className:"py-8 px-4 mx-auto max-w-2xl lg:py-16",children:[(0,s.jsx)("p",{className:"mb-4 text-xl font-bold text-sky-900",children:"Only Current Location can be edited"}),(0,s.jsx)("form",{children:(0,s.jsx)("div",{className:"flex sm:flex-col gap-6",children:Object.entries(n[0]).map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-900",children:t.replace(/_/g," ")}),(0,s.jsx)("input",{type:"text",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5",name:t,value:l[t]||r,onChange:e=>i(r=>({...r,[t]:e.target.value})),readOnly:["id","created_at","mail_id","sender","title","endorse_by"].includes(t)})]},t)})})}),(0,s.jsx)("button",{className:"inline-flex items-center px-5 py-2.5 mt-4 text-sm font-medium text-white bg-sky-900 rounded-lg focus:ring-4 focus:ring-primary-200 hover:bg-primary-800",onClick:f,disabled:p,children:p?"Updating...":"Update Mail"})]}),(0,s.jsx)(d.A,{})]})}},7374:(e,t,r)=>{"use strict";r.d(t,{$5:()=>l,iD:()=>i,ri:()=>n});var s=r(399),a=r(3456);let l=async(e,t)=>{try{await (0,s.eJ)(a.j,e,t)}catch(e){throw console.error(e.message),e}},i=async(e,t)=>{try{await (0,s.x9)(a.j,e,t)}catch(e){throw console.error(e.message),e}},n=async()=>{try{await (0,s.CI)(a.j)}catch(e){throw console.error(e.message),e}}},3456:(e,t,r)=>{"use strict";r.d(t,{j:()=>o});var s=r(9904),a=r(399),l=r(2818);let i={apiKey:"AIzaSyDw2861uQIf23W-6vdOyrHvIANzfVCisgY",authDomain:"emms-608f3.firebaseapp.com",projectId:l.env.FIREBASE_PROJECT_ID,storageBucket:l.env.FIREBASE_STORAGE_BUCKET,messagingSenderId:l.env.FIREBASE_MESSAGING_SENDER_ID,appId:l.env.FIREBASE_APP_ID,measurementId:l.env.FIREBASE_MEASUREMENT_ID},n=(0,s.Wp)(i),o=(0,a.xI)(n)},2418:(e,t,r)=>{"use strict";r.d(t,{N:()=>s});let s=(0,r(3524).UU)("https://njfjrmzykoyqgobwkudm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5qZmpybXp5a295cWdvYndrdWRtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzYxMjI0NzgsImV4cCI6MjA1MTY5ODQ3OH0.OT5l8HPprDT_TWngcwqoZ4EjLimu1cQ-mgKA8DlRKXg")},5716:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[797,138,524,564,441,517,358],()=>t(6515)),_N_E=e.O()}]);