(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[473],{3160:(e,l,t)=>{Promise.resolve().then(t.bind(t,1141))},1141:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>o,useMailById:()=>i});var s=t(5155),a=t(2115),r=t(2418);let n=()=>{let[e,l]=(0,a.useState)("");return(0,a.useEffect)(()=>{let e=sessionStorage.getItem("officeID");e&&l(e.replace(/"/g,""))},[]),[e,l]},c=async(e,l)=>{if(!e||!l)return null;try{let{data:t,error:s}=await r.N.from(e).select("*").eq("mail_id",l);if(s)return console.error("Error fetching mail by ID:",s),null;return t}catch(e){return console.error("Unexpected error:",e),null}},i=(e,l)=>{let[t,s]=(0,a.useState)(null),[r,n]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{l&&e&&(async()=>{n(!0),s(await c(e,l)),n(!1)})()},[l,e]),{mailData:t,loading:r}},o=()=>{let[e,l]=(0,a.useState)(""),[t,r]=(0,a.useState)(""),[c,o]=(0,a.useState)(!1),d=(0,a.useMemo)(()=>["RMO","Bursar"],[]),[x,u]=n(),{mailData:m,loading:f}=i(x,e),g=e=>{r(e),sessionStorage.setItem("officeID",e.toLowerCase()),u(e.toLowerCase()),o(!1)};return(0,s.jsxs)("div",{children:[(0,s.jsxs)("form",{className:"max-w-lg mx-auto mt-44",children:[(0,s.jsxs)("div",{className:"text-center mb-4",children:[(0,s.jsx)("h3",{className:"mb-4 text-3xl text-center font-bold text-sky-900",children:"Select Office"}),(0,s.jsx)("input",{type:"text",value:t,onChange:e=>{r(e.target.value),o(!0)},className:"block p-2.5 w-full z-20 text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500",placeholder:"Select an Office",onClick:()=>o(!0)}),c&&(0,s.jsx)("ul",{className:"absolute z-10 bg-white text-gray-700 rounded shadow-lg mt-1 w-48",children:d.map((e,l)=>(0,s.jsx)("li",{onClick:()=>g(e),className:"block px-4 py-2 hover:bg-gray-100 cursor-pointer",children:e},l))})]}),(0,s.jsx)("h2",{className:"mb-4 text-3xl text-center font-bold text-sky-900",children:"Enter Mail ID"}),(0,s.jsx)("div",{className:"relative w-full",children:(0,s.jsx)("input",{type:"search",className:"block p-2.5 w-full z-20 text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search mails...",value:e,onChange:e=>l(e.target.value),required:!0})})]}),f&&e&&(0,s.jsx)("p",{children:"Loading..."}),m&&m.length>0?(0,s.jsx)("div",{className:"w-full max-w-7xl px-4 md:px-5 lg:px-5 mx-auto",children:m.map(e=>{var l;return(0,s.jsxs)("div",{className:"w-full flex-col justify-start items-start lg:gap-10 gap-8 inline-flex",children:[(0,s.jsx)("h2",{className:"text-center text-sky-900 text-3xl font-bold font-manrope leading-normal",children:"Mail Tracking"}),(0,s.jsxs)("div",{className:"w-full flex-col justify-start items-start gap-3 flex",children:[(0,s.jsxs)("h3",{className:"text-sky-900 text-2xl font-semibold font-manrope leading-9",children:["Mail ID: ",(0,s.jsx)("span",{className:"font-medium",children:e.mail_id})]}),(0,s.jsxs)("h4",{className:"text-sky-900 text-xl font-medium leading-loose",children:["Date created: ",e.created_at.slice(0,10)]})]}),(0,s.jsx)("ol",{className:"flex flex-row space-x-4 w-full",children:null===(l=e.current_location)||void 0===l?void 0:l.split(",").map((l,t)=>(0,s.jsxs)("li",{className:"flex items-center space-x-4 text-sky-900 text-base font-semibold",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("span",{className:"w-6 h-6 bg-sky-900 text-center border-2 border-transparent rounded-full flex justify-center items-center mb-1 text-base font-bold text-white lg:w-10 lg:h-10",children:t+1}),(0,s.jsx)("span",{className:"text-center",children:l.trim()})]}),t<e.current_location.split(",").length-1&&(0,s.jsx)("div",{className:"w-48 h-1 bg-gray-300 mb-6"})]},t))}),(0,s.jsxs)("div",{className:"w-full flex-col justify-start items-start gap-8 flex",children:[(0,s.jsxs)("div",{className:"w-full flex-col gap-1.5",children:[(0,s.jsx)("label",{className:"text-gray-600 text-base font-medium",children:"Sender"}),(0,s.jsx)("input",{defaultValue:e.sender,type:"text",className:"w-full focus:outline-none px-5 py-3 h-14 rounded-lg border border-gray-200 text-gray-900 text-lg",readOnly:!0})]}),(0,s.jsxs)("div",{className:"w-full flex-col gap-1.5",children:[(0,s.jsx)("label",{className:"text-gray-600 text-base font-medium",children:"Mail ID"}),(0,s.jsx)("input",{defaultValue:e.mail_id,type:"text",className:"w-full focus:outline-none px-5 py-3 h-14 rounded-lg border border-gray-200 text-gray-900 text-lg",readOnly:!0})]}),(0,s.jsxs)("div",{className:"w-full flex-col gap-1.5",children:[(0,s.jsx)("label",{className:"text-gray-600 text-base font-medium",children:"Description"}),(0,s.jsx)("input",{defaultValue:e.description,type:"text",className:"w-full focus:outline-none px-5 py-3 h-14 rounded-lg border border-gray-200 text-gray-900 text-lg",readOnly:!0})]})]})]},e.id)})}):e&&(0,s.jsxs)("p",{children:['No mails found for the ID "',e,'"']})]})}},2418:(e,l,t)=>{"use strict";t.d(l,{N:()=>s});let s=(0,t(3524).UU)("https://njfjrmzykoyqgobwkudm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5qZmpybXp5a295cWdvYndrdWRtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzYxMjI0NzgsImV4cCI6MjA1MTY5ODQ3OH0.OT5l8HPprDT_TWngcwqoZ4EjLimu1cQ-mgKA8DlRKXg")}},e=>{var l=l=>e(e.s=l);e.O(0,[524,441,517,358],()=>l(3160)),_N_E=e.O()}]);